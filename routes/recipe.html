<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/recipe.css" />
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <!-- JavaScript Bundle with Popper -->
  </head>

  <body>
    <nav>
      <a href="/main">Main</a>
      <a href="/recipe">Recipe</a>

      <a href="/locate">Info</a>
    </nav>
    <h1>Coffee Recipes (for the adveturist)</h1>
    <p>Cycle through the recipes and discover a new drink</p>
    <p>We guarentee these unqiue coffee recipes will sate your coffee</p>
    <br />
    <br />
    <button id="getRecipe">Load Recipes</button>
    <br />

    <div class="recipeWindow">
      <div id="recipeTitle"></div>
      <br />
      <br />
      <br />
      <br />
      <div id="recipePic"></div>
      <br />
      <br />
      <br />
      <br />
      <br />
      <div id="recipeInfo"></div>
      <br />
      <br />
      <br />
      <br />
      <br />
      <div id="recipeInfo2"></div>
    </div>
  </body>
  <script>
    const btn = document.getElementById("getRecipe");
    btn.addEventListener(
      "click",

      async function getRecipe() {
        const response = await fetch(
          "https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/findByIngredients?ingredients=coffee&number=5&ignorePantry=true&ranking=1",
          {
            method: "GET",
            headers: {
              "X-RapidAPI-Key": "",
              "X-RapidAPI-Host":
                "spoonacular-recipe-food-nutrition-v1.p.rapidapi.com",
            },
          }
        );
        const data = await response.json();
        console.log(data);

        const recipePic = data.map((data) => {
          return data.image;
        });
        console.log(recipePic);
        console.log(recipePic[1]);

        recipePic.forEach((recipePic) => {
          const recipeDisplay = document.getElementById("recipePic");
          const img = document.createElement("img");
          img.src = recipePic;
          recipeDisplay.insertBefore(img, recipeDisplay.children[0]);
          console.log(recipePic);
        });

        const recipeTitle = data.map((data) => {
          return data.title;
        });
        console.log(recipeTitle);
        console.log(recipeTitle[1]);

        recipeTitle.forEach((recipeTitle) => {
          console.log(recipeTitle);
          const recipeTitleDisplay = document.getElementById("recipeTitle");
          const h1 = document.createElement("h1");
          h1.innerHTML = recipeTitle;
          recipeTitleDisplay.insertBefore(h1, recipeTitleDisplay.children[0]);
        });
        const recipeInfo = data.map((data) => {
          return data.missedIngredients[0].original;
        });
        console.log(recipeInfo);
        console.log(recipeInfo[1]);

        recipeInfo.forEach((recipeInfo) => {
          const recipeInfoDisplay = document.getElementById("recipeInfo");
          const h5_1 = document.createElement("h5");
          h5_1.innerHTML = recipeInfo;
          recipeInfoDisplay.insertBefore(h5_1, recipeInfoDisplay.children[0]);
          console.log(recipeInfo);
        });
        const recipeInfo2 = data.map((data) => {
          return data.usedIngredients[0].original;
        });
        console.log(recipeInfo2);
        console.log(recipeInfo2[1]);

        recipeInfo2.forEach((recipeInfo2) => {
          const recipeInfo2Display = document.getElementById("recipeInfo2");
          const h5_2 = document.createElement("h5");
          h5_2.innerHTML = recipeInfo2;
          recipeInfo2Display.insertBefore(h5_2, recipeInfo2Display.children[0]);
          console.log(recipeInfo2);
        });
        // a function that hide the images
        // iterates the
        const images = document.querySelectorAll("div.recipeWindow img");

        let i = 0;

        setInterval(function () {
          if (i == 0) {
            images[i].className = "fade-in-image";
          } else if (i == images.length) {
            images[i - 1].className = "fade-out-image";
            images[0].className = "fade-in-image";
            i = 0;
          } else {
            images[i - 1].className = "fade-out-image";
            images[i].className = "fade-in-image";
          }

          i++;
        }, 2000);
        const titles = document.querySelectorAll("div.recipeWindow h1");

        let u = 0;

        setInterval(function () {
          if (u == 0) {
            titles[u].className = "fade-in-image";
          } else if (u == images.length) {
            titles[u - 1].className = "fade-out-image";
            titles[0].className = "fade-in-image";
            u = 0;
          } else {
            titles[u - 1].className = "fade-out-image";
            titles[u].className = "fade-in-image";
          }

          u++;
        }, 2000);
        const info = document.querySelectorAll("div.recipeWindow h5");

        let o = 0;

        setInterval(function () {
          if (o == 0) {
            info[o].className = "fade-in-image";
          } else if (o == images.length) {
            info[o - 1].className = "fade-out-image";
            info[0].className = "fade-in-image";
            o = 0;
          } else {
            info[o - 1].className = "fade-out-image";
            info[o].className = "fade-in-image";
          }

          o++;
        }, 2000);
        const info2 = document.querySelectorAll("div.recipeWindow h5");

        let a = 0;

        setInterval(function () {
          if (a == 0) {
            info2[a].className = "fade-in-image";
          } else if (a == images.length) {
            info2[a - 1].className = "fade-out-image";
            info2[0].className = "fade-in-image";
            a = 0;
          } else {
            info2[a - 1].className = "fade-out-image";
            info2[a].className = "fade-in-image";
          }

          a++;
        }, 2000);
      }
    );
  </script>
</html>
