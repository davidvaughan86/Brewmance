<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/recipe.css" />
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <!-- JavaScript Bundle with Popper -->
  </head>

  <body>
    <div class="recipeContainer">
      <nav>
        <a href="/main">Main</a>
        <a href="/recipe">Recipe</a>
        <a href="/locate">Info</a>
      </nav>

      <br />
      <button id="getRecipe">Recipes</button>
      <div id="btns">
        <button id="nextRecipe" onclick="next()">Next</button>
        <button id="lastRecipe" onclick="back()">Last</button>
      </div>

      <br />

      <div class="recipeWindow">
        <h3>Stunning!</h3>
        <p id="number">1</p>
        <div id="recipePic">
          <br />
          <br />
        </div>
      </div>
      <div class="recipeInfoWindow">
        <div id="recipeTitle"></div>
        <br />

        <br />

        <div id="recipeInfo"></div>
      </div>
    </div>
  </body>
  <script>
    const btn = document.getElementById("getRecipe");
    btn.addEventListener(
      "click",

      async function getRecipe() {
        document.getElementById("getRecipe").disabled = true;
        const response = await fetch(
          "https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/findByIngredients?ingredients=coffee&number=5&ignorePantry=true&ranking=1",
          {
            method: "GET",
            headers: {
              "X-RapidAPI-Key": "",
              "X-RapidAPI-Host":
                "spoonacular-recipe-food-nutrition-v1.p.rapidapi.com",
            },
          }
        );

        document.getElementById("btns").style.display = "flex";

        const data = await response.json();
        console.log(data);

        const recipePic = data.map((data) => {
          return data.image;
        });
        console.log(recipePic);
        console.log(recipePic[1]);

        const recipeTitle = data.map((data) => {
          return data.title;
        });
        console.log(recipeTitle);
        console.log(recipeTitle[1]);

        const recipeInfo = data.map((data) => {
          return (
            data.missedIngredients[0].original +
            ", also" +
            data.usedIngredients[0].original
          );
        });
        console.log(recipeInfo);
        console.log(recipeInfo[1]);

        recipePic.forEach((recipePic) => {
          const recipeDisplay = document.getElementById("recipePic");
          const img = document.createElement("img");
          img.src = recipePic;
          recipeDisplay.insertBefore(img, recipeDisplay.children[0]);
          console.log(recipePic);
        });

        recipeTitle.forEach((recipeTitle) => {
          console.log(recipeTitle);
          const recipeTitleDisplay = document.getElementById("recipeTitle");
          const h1 = document.createElement("h1");
          h1.innerHTML = recipeTitle;
          recipeTitleDisplay.insertBefore(h1, recipeTitleDisplay.children[0]);
        });

        recipeInfo.forEach((recipeInfo) => {
          const recipeInfoDisplay = document.getElementById("recipeInfo");
          const h5_1 = document.createElement("h5");
          h5_1.innerHTML = recipeInfo;
          recipeInfoDisplay.insertBefore(h5_1, recipeInfoDisplay.children[0]);
          console.log(recipeInfo);
        });

        // let i = 0;

        // setInterval(function () {
        //   if (i == 0) {
        //     images[i].className = "fade-in-image";
        //   } else if (i == images.length) {
        //     images[i - 1].className = "fade-out-image";
        //     images[0].className = "fade-in-image";
        //     i = 0;
        //   } else {
        //     images[i - 1].className = "fade-out-image";
        //     images[i].className = "fade-in-image";
        //   }

        //   i++;
        // }, 2000);

        // let u = 0;

        // setInterval(function () {
        //   if (u == 0) {
        //     titles[u].className = "fade-in-image";
        //   } else if (u == titles.length) {
        //     titles[u - 1].className = "fade-out-image";
        //     titles[0].className = "fade-in-image";
        //     u = 0;
        //   } else {
        //     titles[u - 1].className = "fade-out-image";
        //     titles[u].className = "fade-in-image";
        //   }

        //   u++;
        // }, 2000);

        // let o = 0;

        // setInterval(function () {
        //   if (o == 0) {
        //     info[o].className = "fade-in-image";
        //   } else if (o == info.length) {
        //     info[o - 1].className = "fade-out-image";
        //     info[0].className = "fade-in-image";
        //     o = 0;
        //   } else {
        //     info[o - 1].className = "fade-out-image";
        //     info[o].className = "fade-in-image";
        //   }

        //   o++;
        // }, 2000);
      }
    );
    function back() {
      const images = document.getElementById("recipePic");
      images.innerHTML = recipePic;
    }
    function next() {
      const recipeDisplay = document.getElementById("recipePic");
    }
    const titles = document.querySelectorAll("div.recipeInfoWindow h1");
    const info = document.querySelectorAll("div.recipeInfoWindow h5");

    const backBtn = document.getElementById("lastRecipe");
    const nextBtn = document.getElementById("nextRecipe");
    const number = document.getElementById("number");
    const n = 1;

    // function next() {
    //   n++;
    //   if (n == 0) {
    //     backBtn.disabled = true;
    //     images.innerHTML = recipePic[n];
    //   }
    //   backBtn.disabled = false;
    //   number.innerHTML = n;
    // }

    // function back() {
    //   n--;
    //   if (n == 20) {
    //     nextBtn.disabled = true;
    //   }
    //   nextBtn.disabled = false;
    //   number.innerHTML = n;
    // }
  </script>
</html>
